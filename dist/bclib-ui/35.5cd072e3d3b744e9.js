"use strict";(self.webpackChunkbclib_ui=self.webpackChunkbclib_ui||[]).push([[35],{6035:(gt,q,a)=>{a.r(q),a.d(q,{STUDENTS_ROUTES:()=>ct});var c=a(2787),Z=a(1374),u=a(5195),f=a(2296),g=a(2032),d=a(9157),m=a(5313),C=a(3365),_=a(3566),U=a(617),Y=a(3307),t=a(5879),x=a(4862);function y(e,i){1&e&&(t.TgZ(0,"th",19),t._uU(1," ID "),t.qZA())}function Q(e,i){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.id," ")}}function E(e,i){1&e&&(t.TgZ(0,"th",19),t._uU(1," Full name "),t.qZA())}function I(e,i){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.full_name," ")}}function J(e,i){1&e&&(t.TgZ(0,"th",19),t._uU(1,"Year level "),t.qZA())}function L(e,i){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.year_level," ")}}function D(e,i){1&e&&(t.TgZ(0,"th",19),t._uU(1," Course "),t.qZA())}function O(e,i){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",null==n.course?null:n.course.name," ")}}function F(e,i){1&e&&t._UZ(0,"td",21)}function B(e,i){1&e&&(t.TgZ(0,"th",19),t._uU(1," Status "),t.qZA())}function M(e,i){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.status," ")}}function P(e,i){1&e&&(t.TgZ(0,"th",22),t._uU(1," Action "),t.qZA())}function j(e,i){if(1&e&&(t.TgZ(0,"td",20)(1,"a",23),t._uU(2,"Edit"),t.qZA()()),2&e){const n=i.$implicit;t.xp6(1),t.MGl("routerLink","edit/",n.id,"")}}function w(e,i){1&e&&t._UZ(0,"tr",24)}function z(e,i){1&e&&t._UZ(0,"tr",25)}const H=function(){return[10,20,50]};let R=(()=>{class e{constructor(n){this.studentService=n,this.displayedColumns=["id","full_name","year_level","course","status","action"]}ngOnInit(){this.getStudents()}getStudents(){this.studentService.getAll().pipe((0,Z.P)()).subscribe(n=>{this.students=n,this.dataSource=new m.by(this.students),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}filterChange(n){this.dataSource.filter=n.target.value}exportTable(){Y.E.exportTableToExcel("students","Students")}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(x.V))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["student-list-component"]],viewQuery:function(o,r){if(1&o&&(t.Gf(C.NW,5),t.Gf(_.YE,5)),2&o){let l;t.iGM(l=t.CRH())&&(r.paginator=l.first),t.iGM(l=t.CRH())&&(r.sort=l.first)}},standalone:!0,features:[t.jDz],decls:38,vars:6,consts:[[2,"margin","1%"],[2,"margin-top","1%","margin-left","1%"],["matInput","","placeholder","Search here...",3,"keyup"],["routerLink","add","mat-raised-button","","color","primary",2,"margin-left","74%"],["mat-raised-button","","color","warn",2,"margin-left","1%",3,"click"],["id","students","mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-sort-header","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","full_name"],["matColumnDef","year_level"],["matColumnDef","course"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","status"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["mat-sort-header","","mat-header-cell",""],["mat-cell",""],["mat-footer-cell",""],["mat-header-cell",""],[1,"btn","btn-sm","btn-primary","me-1",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(o,r){1&o&&(t.TgZ(0,"mat-card",0)(1,"h2",1),t._uU(2,"Students"),t.qZA(),t.TgZ(3,"mat-card-header")(4,"mat-form-field")(5,"input",2),t.NdJ("keyup",function(v){return r.filterChange(v)}),t.qZA()(),t.TgZ(6,"button",3),t._uU(7,"Create"),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){return r.exportTable()}),t.TgZ(9,"mat-icon"),t._uU(10,"grid_on"),t.qZA(),t._uU(11,"Export"),t.qZA()(),t.TgZ(12,"mat-card-content")(13,"table",5),t.ynx(14,6),t.YNc(15,y,2,0,"th",7),t.YNc(16,Q,2,1,"td",8),t.BQk(),t.ynx(17,9),t.YNc(18,E,2,0,"th",7),t.YNc(19,I,2,1,"td",8),t.BQk(),t.ynx(20,10),t.YNc(21,J,2,0,"th",7),t.YNc(22,L,2,1,"td",8),t.BQk(),t.ynx(23,11),t.YNc(24,D,2,0,"th",7),t.YNc(25,O,2,1,"td",8),t.YNc(26,F,1,0,"td",12),t.BQk(),t.ynx(27,13),t.YNc(28,B,2,0,"th",7),t.YNc(29,M,2,1,"td",8),t.BQk(),t.ynx(30,14),t.YNc(31,P,2,0,"th",15),t.YNc(32,j,3,1,"td",8),t.BQk(),t.YNc(33,w,1,0,"tr",16),t.YNc(34,z,1,0,"tr",17),t.qZA()(),t._UZ(35,"br"),t.TgZ(36,"mat-card-footer"),t._UZ(37,"mat-paginator",18),t.qZA()()),2&o&&(t.xp6(13),t.Q6J("dataSource",r.dataSource),t.xp6(20),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(3),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(5,H)))},dependencies:[c.rH,u.QW,u.a8,u.dn,u.rt,u.dk,f.ot,f.lW,g.c,g.Nt,d.KE,d.lN,m.p0,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.mD,m.ge,m.ev,m.yh,m.XQ,m.Gk,C.TU,C.NW,_.JX,_.YE,_.nU,U.Ps,U.Hw],styles:["mat-card[_ngcontent-%COMP%]{margin:2%;text-align:left}.mat-mdc-form-field[_ngcontent-%COMP%]{width:98%;margin:1%}.mat-50[_ngcontent-%COMP%]{width:48%;margin:1%}.mat-column-name[_ngcontent-%COMP%], .mat-column-description[_ngcontent-%COMP%]{width:20%}"]})}return e})();var p=a(6814),s=a(6223),V=a(8525),W=a(7921),k=a(7398),N=a(7296),T=a(4630),G=a(8034),S=a(3680),A=a(2048);function K(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Student ID is required"),t.qZA())}function X(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,K,2,0,"span",4),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.student_id.errors.required)}}function $(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"First Name is required"),t.qZA())}function tt(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,$,2,0,"span",4),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.first_name.errors.required)}}function et(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Last Name is required"),t.qZA())}function nt(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,et,2,0,"span",4),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.last_name.errors.required)}}function rt(e,i){if(1&e&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n.name," ")}}function it(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Course is required"),t.qZA())}function at(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,it,2,0,"span",4),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.course.errors.required)}}function ot(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Year level is required"),t.qZA())}function st(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,ot,2,0,"span",4),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.year_level.errors.required)}}function mt(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Status is required"),t.qZA())}function lt(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,mt,2,0,"span",4),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.status.errors.required)}}function ut(e,i){1&e&&t._UZ(0,"span",26)}function dt(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Update"),t.qZA())}function pt(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Save"),t.qZA())}const h=function(e){return{"is-invalid":e}};let b=(()=>{class e{constructor(n,o,r,l,v,ft){this.formBuilder=n,this.route=o,this.router=r,this.StudentService=l,this.alertService=v,this.CourseService=ft,this.loading=!1,this.submitting=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.form=this.formBuilder.group({student_id:["",s.kI.required],first_name:["",s.kI.required],last_name:["",s.kI.required],full_name:[""],course:["",s.kI.required],year_level:[N.Bw.FIFHYEAR,s.kI.required],description:[""],status:[N.qb.ENABLED,s.kI.required]}),this.loadCourses(),this.title="Add Student",this.id&&(this.title="Edit Student",this.loading=!0,this.StudentService.getById(this.id).pipe((0,Z.P)()).subscribe(n=>{this.form.get("course")?.patchValue(n.course),this.form.patchValue(n),this.loading=!1})),this.filteredOptionsCur=this.form.get("course").valueChanges.pipe((0,W.O)(""),(0,k.U)(n=>{const o="string"==typeof n?n:n?.name;return o?this._listfilterCur(o):this.courses?.slice()}))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.submitting=!0,this.saveStudent().pipe((0,Z.P)()).subscribe({next:()=>{this.alertService.success("Student saved",!0),this.router.navigateByUrl("/students")},error:n=>{this.alertService.error(n),this.submitting=!1}}))}saveStudent(){return this.id?this.StudentService.update(this.id,this.form.value):this.StudentService.create(this.form.value)}loadCourses(){this.CourseService.getAllEnabled().subscribe(n=>{this.courses=n})}_listfilterCur(n){const o=n.toLowerCase();return this.courses?.filter(r=>r.name?.toLowerCase().includes(o))}displayFnCur(n){return n&&n.name?n.name:""}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(s.qu),t.Y36(c.gz),t.Y36(c.F0),t.Y36(A.VT),t.Y36(A.c9),t.Y36(A.NF))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],standalone:!0,features:[t.jDz],decls:66,vars:29,consts:[[3,"formGroup","ngSubmit"],[2,"margin-top","1%","margin-left","1%"],[1,"mat-50"],["type","text","formControlName","student_id","matInput","",3,"ngClass"],[4,"ngIf"],["type","text","formControlName","first_name","matInput","",3,"ngClass"],["type","text","formControlName","last_name","matInput","",3,"ngClass"],["type","text","placeholder","Select...","aria-label","Course","matInput","","formControlName","course",3,"ngClass","matAutocomplete"],["autoActiveFirstOption","",3,"displayWith"],["autoPub","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matNativeControl","","required","","formControlName","year_level","matInput",""],["value","First Year"],["value","Second Year"],["value","Third Year"],["value","Fourth Year"],["value","Fifh Year"],["formControlName","description","matInput",""],["matNativeControl","","required","","formControlName","status","matInput",""],["value","Enabled"],["value","Disabled"],[2,"margin","2%","text-align","right"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["routerLink","/students",1,"btn","btn-link"],[3,"value"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(o,r){if(1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(1,"mat-card")(2,"mat-card-header")(3,"h2",1),t._uU(4),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Student ID"),t.qZA(),t._UZ(9,"input",3),t.YNc(10,X,2,1,"mat-error",4),t.qZA(),t.TgZ(11,"mat-form-field",2)(12,"mat-label"),t._uU(13,"First Name"),t.qZA(),t._UZ(14,"input",5),t.YNc(15,tt,2,1,"mat-error",4),t.qZA(),t.TgZ(16,"mat-form-field",2)(17,"mat-label"),t._uU(18,"Last Name"),t.qZA(),t._UZ(19,"input",6),t.YNc(20,nt,2,1,"mat-error",4),t.qZA(),t.TgZ(21,"mat-form-field",2)(22,"mat-label"),t._uU(23,"Course"),t.qZA(),t._UZ(24,"input",7),t.TgZ(25,"mat-autocomplete",8,9),t.YNc(27,rt,2,2,"mat-option",10),t.ALo(28,"async"),t.qZA(),t.YNc(29,at,2,1,"mat-error",4),t.qZA(),t.TgZ(30,"mat-form-field",2)(31,"mat-label"),t._uU(32,"Year level"),t.qZA(),t.TgZ(33,"select",11)(34,"option",12),t._uU(35,"First Year"),t.qZA(),t.TgZ(36,"option",13),t._uU(37,"Second Year"),t.qZA(),t.TgZ(38,"option",14),t._uU(39,"Third Year"),t.qZA(),t.TgZ(40,"option",15),t._uU(41,"Fourth Year"),t.qZA(),t.TgZ(42,"option",16),t._uU(43,"Fifh Year"),t.qZA()(),t.YNc(44,st,2,1,"mat-error",4),t.qZA(),t.TgZ(45,"mat-form-field",2)(46,"mat-label"),t._uU(47,"Description"),t.qZA(),t._UZ(48,"textarea",17),t.qZA(),t.TgZ(49,"mat-form-field",2)(50,"mat-label"),t._uU(51,"Status"),t.qZA(),t.TgZ(52,"select",18)(53,"option",19),t._uU(54,"Enabled"),t.qZA(),t.TgZ(55,"option",20),t._uU(56,"Disabled"),t.qZA()(),t.YNc(57,lt,2,1,"mat-error",4),t.qZA()(),t.TgZ(58,"mat-card-footer")(59,"div",21)(60,"button",22),t.YNc(61,ut,1,0,"span",23),t.YNc(62,dt,2,0,"span",4),t.YNc(63,pt,2,0,"span",4),t.qZA(),t.TgZ(64,"a",24),t._uU(65,"Cancel"),t.qZA()()()()()),2&o){const l=t.MAs(26);t.Q6J("formGroup",r.form),t.xp6(4),t.Oqu(r.title),t.xp6(5),t.Q6J("ngClass",t.VKq(21,h,r.submitted&&r.f.student_id.errors)),t.xp6(1),t.Q6J("ngIf",r.submitted&&r.f.student_id.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(23,h,r.submitted&&r.f.first_name.errors)),t.xp6(1),t.Q6J("ngIf",r.submitted&&r.f.first_name.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(25,h,r.submitted&&r.f.last_name.errors)),t.xp6(1),t.Q6J("ngIf",r.submitted&&r.f.last_name.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(27,h,r.submitted&&r.f.course.errors))("matAutocomplete",l),t.xp6(1),t.Q6J("displayWith",r.displayFnCur),t.xp6(2),t.Q6J("ngForOf",t.lcZ(28,19,r.filteredOptionsCur)),t.xp6(2),t.Q6J("ngIf",r.submitted&&r.f.course.errors),t.xp6(15),t.Q6J("ngIf",r.submitted&&r.f.year_level.errors),t.xp6(13),t.Q6J("ngIf",r.submitted&&r.f.status.errors),t.xp6(3),t.Q6J("disabled",r.submitting),t.xp6(1),t.Q6J("ngIf",r.submitting),t.xp6(1),t.Q6J("ngIf",r.id),t.xp6(1),t.Q6J("ngIf",!r.id)}},dependencies:[p.O5,s.UX,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.Q7,s.sg,s.u,p.mk,p.ez,p.sg,p.Ov,c.rH,u.QW,u.a8,u.dn,u.rt,u.dk,d.lN,d.KE,d.hX,d.TO,g.c,g.Nt,f.ot,f.lW,V.LD,S.ey,T.Bb,T.XC,T.ZL,G.FA,S.XK],styles:["mat-card[_ngcontent-%COMP%]{margin:2%;text-align:left}.mat-mdc-form-field[_ngcontent-%COMP%]{width:98%;margin:1%}.mat-50[_ngcontent-%COMP%]{width:48%;margin:1%}.mat-column-name[_ngcontent-%COMP%], .mat-column-description[_ngcontent-%COMP%]{width:20%}"]})}return e})();const ct=[{path:"",component:R},{path:"add",component:b},{path:"edit/:id",component:b}]}}]);