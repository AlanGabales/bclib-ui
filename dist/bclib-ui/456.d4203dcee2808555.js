"use strict";(self.webpackChunkbclib_ui=self.webpackChunkbclib_ui||[]).push([[456],{9456:(At,U,a)=>{a.r(U),a.d(U,{BORROW_RECORD_ROUTES:()=>Zt});var _=a(2787),C=a(1374),d=a(5195),g=a(2296),h=a(2032),u=a(9157),m=a(5313),A=a(3365),Z=a(3566),S=a(617),N=a(3307),t=a(5879),k=a(6894);function Y(e,n){1&e&&(t.TgZ(0,"th",18),t._uU(1," ID "),t.qZA())}function O(e,n){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.id," ")}}function Q(e,n){1&e&&(t.TgZ(0,"th",18),t._uU(1," Student"),t.qZA())}function J(e,n){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",null==o.student?null:o.student.name," ")}}function w(e,n){1&e&&t._UZ(0,"td",20)}function B(e,n){1&e&&(t.TgZ(0,"th",18),t._uU(1," Employee"),t.qZA())}function L(e,n){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",null==o.employee?null:o.employee.name," ")}}function I(e,n){1&e&&t._UZ(0,"td",20)}function R(e,n){1&e&&(t.TgZ(0,"th",18),t._uU(1," Book "),t.qZA())}function D(e,n){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",null==o.book?null:o.book.name," ")}}function F(e,n){1&e&&t._UZ(0,"td",20)}function M(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Action "),t.qZA())}function P(e,n){if(1&e&&(t.TgZ(0,"td",19)(1,"a",22),t._uU(2,"Edit"),t.qZA()()),2&e){const o=n.$implicit;t.xp6(1),t.MGl("routerLink","edit/",o.id,"")}}function W(e,n){1&e&&t._UZ(0,"tr",23)}function G(e,n){1&e&&t._UZ(0,"tr",24)}const j=function(){return[10,20,50]};let V=(()=>{class e{constructor(o){this.borrowersRecordService=o,this.displayedColumns=["id","student","employee","book","action"]}ngOnInit(){this.getBorrwersRecord()}getBorrwersRecord(){this.borrowersRecordService.getAll().pipe((0,C.P)()).subscribe(o=>{this.borrowers_record=o,this.dataSource=new m.by(this.borrowers_record),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}filterChange(o){this.dataSource.filter=o.target.value}exportTable(){N.E.exportTableToExcel("borrowers_record","Books")}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(k.M))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["borrowers_record-list-component"]],viewQuery:function(i,r){if(1&i&&(t.Gf(A.NW,5),t.Gf(Z.YE,5)),2&i){let l;t.iGM(l=t.CRH())&&(r.paginator=l.first),t.iGM(l=t.CRH())&&(r.sort=l.first)}},standalone:!0,features:[t.jDz],decls:37,vars:6,consts:[[2,"margin","1%"],[2,"margin-top","1%","margin-left","1%"],["matInput","","placeholder","Search here...",3,"keyup"],["routerLink","add","mat-raised-button","","color","primary",2,"margin-left","74%"],["mat-raised-button","","color","warn",2,"margin-left","1%",3,"click"],["id","borrowers_record","mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-sort-header","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","student"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","employee"],["matColumnDef","book"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["mat-sort-header","","mat-header-cell",""],["mat-cell",""],["mat-footer-cell",""],["mat-header-cell",""],[1,"btn","btn-sm","btn-primary","me-1",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(i,r){1&i&&(t.TgZ(0,"mat-card",0)(1,"h2",1),t._uU(2,"Books"),t.qZA(),t.TgZ(3,"mat-card-header")(4,"mat-form-field")(5,"input",2),t.NdJ("keyup",function(f){return r.filterChange(f)}),t.qZA()(),t.TgZ(6,"button",3),t._uU(7,"Create"),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){return r.exportTable()}),t.TgZ(9,"mat-icon"),t._uU(10,"grid_on"),t.qZA(),t._uU(11,"Export"),t.qZA()(),t.TgZ(12,"mat-card-content")(13,"table",5),t.ynx(14,6),t.YNc(15,Y,2,0,"th",7),t.YNc(16,O,2,1,"td",8),t.BQk(),t.ynx(17,9),t.YNc(18,Q,2,0,"th",7),t.YNc(19,J,2,1,"td",8),t.YNc(20,w,1,0,"td",10),t.BQk(),t.ynx(21,11),t.YNc(22,B,2,0,"th",7),t.YNc(23,L,2,1,"td",8),t.YNc(24,I,1,0,"td",10),t.BQk(),t.ynx(25,12),t.YNc(26,R,2,0,"th",7),t.YNc(27,D,2,1,"td",8),t.YNc(28,F,1,0,"td",10),t.BQk(),t.ynx(29,13),t.YNc(30,M,2,0,"th",14),t.YNc(31,P,3,1,"td",8),t.BQk(),t.YNc(32,W,1,0,"tr",15),t.YNc(33,G,1,0,"tr",16),t.qZA()(),t._UZ(34,"br"),t.TgZ(35,"mat-card-footer"),t._UZ(36,"mat-paginator",17),t.qZA()()),2&i&&(t.xp6(13),t.Q6J("dataSource",r.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(3),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(5,j)))},dependencies:[_.rH,d.QW,d.a8,d.dn,d.rt,d.dk,g.ot,g.lW,h.c,h.Nt,u.KE,u.lN,m.p0,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.mD,m.ge,m.ev,m.yh,m.XQ,m.Gk,A.TU,A.NW,Z.JX,Z.YE,Z.nU,S.Ps,S.Hw],styles:["mat-card[_ngcontent-%COMP%]{margin:2%;text-align:left}.mat-mdc-form-field[_ngcontent-%COMP%]{width:98%;margin:1%}.mat-50[_ngcontent-%COMP%]{width:48%;margin:1%}.mat-column-name[_ngcontent-%COMP%], .mat-column-description[_ngcontent-%COMP%]{width:20%}"]})}return e})();var p=a(6814),s=a(6223),z=a(8525),b=a(4630),y=a(7921),v=a(7398),x=a(7296),H=a(4283),c=a(2048),K=a(3680);function $(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"Borrower Type is required"),t.qZA())}function X(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,$,2,0,"span",6),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.f.borrower_type.errors.required)}}function tt(e,n){if(1&e&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o.full_name," ")}}function et(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"Student is required"),t.qZA())}function ot(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,et,2,0,"span",6),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.f.student.errors.required)}}function rt(e,n){if(1&e&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o.full_name," ")}}function nt(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"Employee is required"),t.qZA())}function it(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,nt,2,0,"span",6),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.f.employee.errors.required)}}function at(e,n){if(1&e&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o.title," ")}}function st(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"Book title is required"),t.qZA())}function mt(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,st,2,0,"span",6),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.f.book.errors.required)}}function lt(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"Remarks is required"),t.qZA())}function dt(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,lt,2,0,"span",6),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.f.remarks.errors.required)}}function ut(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"Status is required"),t.qZA())}function pt(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,ut,2,0,"span",6),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.f.book_status.errors.required)}}function ct(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"Status is required"),t.qZA())}function ft(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,ct,2,0,"span",6),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.f.return_status.errors.required)}}function _t(e,n){1&e&&t._UZ(0,"span",29)}function gt(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"Update"),t.qZA())}function ht(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"Save"),t.qZA())}const T=function(e){return{"is-invalid":e}};let E=(()=>{class e{constructor(o,i,r,l,f,q,Tt,Ct){this.formBuilder=o,this.route=i,this.router=r,this.borrowers_recordService=l,this.studentService=f,this.employeeService=q,this.bookService=Tt,this.alertService=Ct,this.loading=!1,this.submitting=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.form=this.formBuilder.group({borrower_type:[H.D.Student,s.kI.required],student:["",s.kI.required],employee:["",s.kI.required],book:["",s.kI.required],remarks:[""],book_status:[x.Cf.CHECKEDOUT,s.kI.required],return_status:[x.Rr.GOOD,s.kI.required]}),this.loadStudents(),this.loadEmployees(),this.loadBooks(),this.title="Add Borrowers Record",this.id&&(this.title="Edit Borrowers Record",this.loading=!0,this.borrowers_recordService.getById(this.id).pipe((0,C.P)()).subscribe(o=>{this.form.get("student")?.patchValue(o.student),this.form.get("employee")?.patchValue(o.employee),this.form.patchValue(o),this.loading=!1})),this.filteredOptionsStu=this.form.get("student").valueChanges.pipe((0,y.O)(""),(0,v.U)(o=>{const i="string"==typeof o?o:o?.full_name;return i?this._listfilterStu(i):this.students?.slice()})),this.filteredOptionsEmp=this.form.get("employee").valueChanges.pipe((0,y.O)(""),(0,v.U)(o=>{const i="string"==typeof o?o:o?.full_name;return i?this._listfilterEmp(i):this.employees?.slice()})),this.filteredOptionsBook=this.form.get("book").valueChanges.pipe((0,y.O)(""),(0,v.U)(o=>{const i="string"==typeof o?o:o?.title;return i?this._listfilterBook(i):this.books?.slice()}))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.submitting=!0,this.saveBorrowersRecord().pipe((0,C.P)()).subscribe({next:()=>{this.alertService.success("Borrowers Record saved",!0),this.router.navigateByUrl("/borrowers-record")},error:o=>{this.alertService.error(o),this.submitting=!1}}))}saveBorrowersRecord(){return this.id?this.borrowers_recordService.update(this.id,this.form.value):this.borrowers_recordService.create(this.form.value)}loadStudents(){this.studentService.getAllEnabled().subscribe(o=>{this.students=o})}_listfilterStu(o){const i=o.toLowerCase();return this.students?.filter(r=>r.full_name?.toLowerCase().includes(i))}displayFnStu(o){return o&&o.full_name?o.full_name:""}loadEmployees(){this.employeeService.getAllEnabled().subscribe(o=>{this.employees=o})}_listfilterEmp(o){const i=o.toLowerCase();return this.employees?.filter(r=>r.full_name?.toLowerCase().includes(i))}displayFnEmp(o){return o&&o.full_name?o.full_name:""}loadBooks(){this.bookService.getAllEnabled().subscribe(o=>{this.books=o})}_listfilterBook(o){const i=o.toLowerCase();return this.books?.filter(r=>r.title?.toLowerCase().includes(i))}displayFnBook(o){return o&&o.title?o.title:""}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(s.qu),t.Y36(_.gz),t.Y36(_.F0),t.Y36(c.MT),t.Y36(c.VT),t.Y36(c.GP),t.Y36(c.Zp),t.Y36(c.c9))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],standalone:!0,features:[t.jDz],decls:75,vars:40,consts:[[3,"formGroup","ngSubmit"],[2,"margin-top","1%","margin-left","1%"],[1,"mat-50"],["matNativeControl","","required","","formControlName","borrower_type","matInput",""],["value","Student"],["value","Employee"],[4,"ngIf"],["type","text","placeholder","Select...","aria-label","Student","matInput","","formControlName","student",3,"ngClass","matAutocomplete"],["autoActiveFirstOption","",3,"displayWith"],["autoStu","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Select...","aria-label","Employee","matInput","","formControlName","employee",3,"ngClass","matAutocomplete"],["autoActiveFirstOptions","",3,"displayWith"],["autoEmp","matAutocomplete"],["type","text","placeholder","Select...","aria-label","Book","matInput","","formControlName","book",3,"ngClass","matAutocomplete"],["autoBook","matAutocomplete"],["type","text","formControlName","remarks","matInput","",3,"ngClass"],["matNativeControl","","required","","formControlName","book_status","matInput",""],["value","Checked Out"],["value","Returned"],["matNativeControl","","required","","formControlName","return_status","matInput",""],["value","Good"],["value","Damaged"],["value","Lost"],[2,"margin","2%","text-align","right"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["routerLink","/borrowers-record",1,"btn","btn-link"],[3,"value"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,r){if(1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(1,"mat-card")(2,"mat-card-header")(3,"h2",1),t._uU(4),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Borrower Type"),t.qZA(),t.TgZ(9,"select",3)(10,"option",4),t._uU(11,"Student"),t.qZA(),t.TgZ(12,"option",5),t._uU(13,"Employee"),t.qZA()(),t.YNc(14,X,2,1,"mat-error",6),t.qZA(),t.TgZ(15,"mat-form-field",2)(16,"mat-label"),t._uU(17,"Student"),t.qZA(),t._UZ(18,"input",7),t.TgZ(19,"mat-autocomplete",8,9),t.YNc(21,tt,2,2,"mat-option",10),t.ALo(22,"async"),t.qZA(),t.YNc(23,ot,2,1,"mat-error",6),t.qZA(),t.TgZ(24,"mat-form-field",2)(25,"mat-label"),t._uU(26,"Employee"),t.qZA(),t._UZ(27,"input",11),t.TgZ(28,"mat-autocomplete",12,13),t.YNc(30,rt,2,2,"mat-option",10),t.ALo(31,"async"),t.qZA(),t.YNc(32,it,2,1,"mat-error",6),t.qZA(),t.TgZ(33,"mat-form-field",2)(34,"mat-label"),t._uU(35,"Book Title"),t.qZA(),t._UZ(36,"input",14),t.TgZ(37,"mat-autocomplete",8,15),t.YNc(39,at,2,2,"mat-option",10),t.ALo(40,"async"),t.qZA(),t.YNc(41,mt,2,1,"mat-error",6),t.qZA(),t.TgZ(42,"mat-form-field",2)(43,"mat-label"),t._uU(44,"Remarks"),t.qZA(),t._UZ(45,"input",16),t.YNc(46,dt,2,1,"mat-error",6),t.qZA(),t.TgZ(47,"mat-form-field",2)(48,"mat-label"),t._uU(49,"Book Status"),t.qZA(),t.TgZ(50,"select",17)(51,"option",18),t._uU(52,"Checked Out"),t.qZA(),t.TgZ(53,"option",19),t._uU(54,"Returned"),t.qZA()(),t.YNc(55,pt,2,1,"mat-error",6),t.qZA(),t.TgZ(56,"mat-form-field",2)(57,"mat-label"),t._uU(58,"Book Status"),t.qZA(),t.TgZ(59,"select",20)(60,"option",21),t._uU(61,"Good"),t.qZA(),t.TgZ(62,"option",22),t._uU(63,"Damaged"),t.qZA(),t.TgZ(64,"option",23),t._uU(65,"Lost"),t.qZA()(),t.YNc(66,ft,2,1,"mat-error",6),t.qZA()(),t.TgZ(67,"mat-card-footer")(68,"div",24)(69,"button",25),t.YNc(70,_t,1,0,"span",26),t.YNc(71,gt,2,0,"span",6),t.YNc(72,ht,2,0,"span",6),t.qZA(),t.TgZ(73,"a",27),t._uU(74,"Cancel"),t.qZA()()()()()),2&i){const l=t.MAs(20),f=t.MAs(29),q=t.MAs(38);t.Q6J("formGroup",r.form),t.xp6(4),t.Oqu(r.title),t.xp6(10),t.Q6J("ngIf",r.submitted&&r.f.borrower_type.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(32,T,r.submitted&&r.f.student.errors))("matAutocomplete",l),t.xp6(1),t.Q6J("displayWith",r.displayFnStu),t.xp6(2),t.Q6J("ngForOf",t.lcZ(22,26,r.filteredOptionsStu)),t.xp6(2),t.Q6J("ngIf",r.submitted&&r.f.student.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(34,T,r.submitted&&r.f.employee.errors))("matAutocomplete",f),t.xp6(1),t.Q6J("displayWith",r.displayFnEmp),t.xp6(2),t.Q6J("ngForOf",t.lcZ(31,28,r.filteredOptionsEmp)),t.xp6(2),t.Q6J("ngIf",r.submitted&&r.f.employee.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(36,T,r.submitted&&r.f.book.errors))("matAutocomplete",q),t.xp6(1),t.Q6J("displayWith",r.displayFnBook),t.xp6(2),t.Q6J("ngForOf",t.lcZ(40,30,r.filteredOptionsBook)),t.xp6(2),t.Q6J("ngIf",r.submitted&&r.f.book.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(38,T,r.submitted&&r.f.remarks.errors)),t.xp6(1),t.Q6J("ngIf",r.submitted&&r.f.remarks.errors),t.xp6(9),t.Q6J("ngIf",r.submitted&&r.f.book_status.errors),t.xp6(11),t.Q6J("ngIf",r.submitted&&r.f.return_status.errors),t.xp6(3),t.Q6J("disabled",r.submitting),t.xp6(1),t.Q6J("ngIf",r.submitting),t.xp6(1),t.Q6J("ngIf",r.id),t.xp6(1),t.Q6J("ngIf",!r.id)}},dependencies:[p.O5,s.UX,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.Q7,s.sg,s.u,p.mk,p.ez,p.sg,p.Ov,_.rH,d.QW,d.a8,d.dn,d.rt,d.dk,u.lN,u.KE,u.hX,u.TO,h.c,h.Nt,g.ot,g.lW,z.LD,K.ey,b.Bb,b.XC,b.ZL],styles:["mat-card[_ngcontent-%COMP%]{margin:2%;text-align:left}.mat-mdc-form-field[_ngcontent-%COMP%]{width:98%;margin:1%}.mat-50[_ngcontent-%COMP%]{width:48%;margin:1%}.mat-column-name[_ngcontent-%COMP%], .mat-column-description[_ngcontent-%COMP%]{width:20%}"]})}return e})();const Zt=[{path:"",component:V},{path:"add",component:E},{path:"edit/:id",component:E}]}}]);