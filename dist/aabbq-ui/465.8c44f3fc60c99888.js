"use strict";(self.webpackChunkaabbq_ui=self.webpackChunkaabbq_ui||[]).push([[465],{1465:(dt,U,a)=>{a.r(U),a.d(U,{PRODUCT_INS_ROUTES:()=>st});var c=a(6814),s=a(6223),u=a(2787),v=a(1374),m=a(5195),g=a(2296),Z=a(2032),p=a(9157),d=a(5313),y=a(3365),C=a(3566),x=a(617),T=a(8034),Y=a(3307),I=a(3680),t=a(5879),N=a(7398),A=a(1594),Q=a(9862);let b=(()=>{class e{constructor(n,i){this.router=n,this.http=i}getAll(n){return this.http.get(`${A.N.apiUrl}/product-in/${n}`)}create(n){return this.http.post(`${A.N.apiUrl}/product-in`,n)}getById(n){return this.http.get(`${A.N.apiUrl}/product-in/edit/${n}`)}update(n,i){return this.http.put(`${A.N.apiUrl}/product-in/${n}`,i).pipe((0,N.U)(r=>r))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(u.F0),t.LFG(Q.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function q(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1," ID "),t.qZA())}function L(e,o){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.id," ")}}function P(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1," Transaction Date "),t.qZA())}function J(e,o){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n.transaction_date,"MM/dd/yyyy")," ")}}function O(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1," Product "),t.qZA())}function M(e,o){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.product.name," ")}}function E(e,o){1&e&&(t.TgZ(0,"th",21),t._uU(1," Qty "),t.qZA())}function F(e,o){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.qty," ")}}function w(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1," Action "),t.qZA())}function B(e,o){if(1&e&&(t.TgZ(0,"td",22)(1,"a",24),t._uU(2,"Edit"),t.qZA()()),2&e){const n=o.$implicit;t.xp6(1),t.MGl("routerLink","edit/",n.id,"")}}function R(e,o){1&e&&t._UZ(0,"tr",25)}function $(e,o){1&e&&t._UZ(0,"tr",26)}const z=function(){return[10,20,50]};let H=(()=>{class e{constructor(n,i){this.productInService=n,this.datePipe=i,this.displayedColumns=["id","transaction_date","product","qty","action"],this.filterDate=new s.NI(new Date)}ngOnInit(){this.getAll(new Date)}getAll(n){this.productInService.getAll(n).pipe((0,v.P)()).subscribe(i=>{this.productIns=i,this.dataSource=new d.by(this.productIns),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(r,l)=>{const f=new Date(r.transaction_date),h=new Date(l);return console.log(l),r.product?.name?.toLocaleLowerCase().includes(l)||f.getFullYear()===h.getFullYear()&&f.getMonth()===h.getMonth()&&f.getDate()===h.getDate()}})}filterChange(n){this.dataSource.filter=n.target.value}exportTable(){Y.E.exportTableToExcel("productIns","Product Ins")}onDateChange(n){const i=n.value;console.log(this.datePipe.transform(i,"MM/dd/yyyy")),this.getAll(new Date(i)),this.dataSource.filter=this.datePipe.transform(i,"yyyy-MM-dd HH:mm:ss")}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(b),t.Y36(c.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["product-in-list-component"]],viewQuery:function(n,i){if(1&n&&(t.Gf(y.NW,5),t.Gf(C.YE,5)),2&n){let r;t.iGM(r=t.CRH())&&(i.paginator=r.first),t.iGM(r=t.CRH())&&(i.sort=r.first)}},standalone:!0,features:[t._Bn([c.uU]),t.jDz],decls:43,vars:9,consts:[[2,"margin","1%"],[2,"margin-top","1%","margin-left","1%"],["matInput","","placeholder","Search here...",3,"keyup"],["matInput","",3,"matDatepicker","dateChange"],["matIconSuffix","",3,"for"],["startView","month",3,"startAt"],["picker",""],["routerLink","add","mat-raised-button","","color","primary",2,"margin-left","44%"],["mat-raised-button","","color","warn",2,"margin-left","1%",3,"click"],["id","productIns","mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-sort-header","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","transaction_date"],["matColumnDef","product"],["matColumnDef","qty"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["mat-sort-header","","mat-header-cell",""],["mat-cell",""],["mat-header-cell",""],[1,"btn","btn-sm","btn-primary","me-1",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(n,i){if(1&n&&(t.TgZ(0,"mat-card",0)(1,"h2",1),t._uU(2,"Product Ins"),t.qZA(),t.TgZ(3,"mat-card-header")(4,"mat-form-field")(5,"input",2),t.NdJ("keyup",function(l){return i.filterChange(l)}),t.qZA()(),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8,"Filter transaction date"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("dateChange",function(l){return i.onDateChange(l)}),t.qZA(),t.TgZ(10,"mat-hint"),t._uU(11,"MM/DD/YYYY"),t.qZA(),t._UZ(12,"mat-datepicker-toggle",4)(13,"mat-datepicker",5,6),t.qZA(),t.TgZ(15,"button",7),t._uU(16,"Create"),t.qZA(),t.TgZ(17,"button",8),t.NdJ("click",function(){return i.exportTable()}),t.TgZ(18,"mat-icon"),t._uU(19,"grid_on"),t.qZA(),t._uU(20,"Export"),t.qZA()(),t.TgZ(21,"mat-card-content")(22,"table",9),t.ynx(23,10),t.YNc(24,q,2,0,"th",11),t.YNc(25,L,2,1,"td",12),t.BQk(),t.ynx(26,13),t.YNc(27,P,2,0,"th",11),t.YNc(28,J,3,4,"td",12),t.BQk(),t.ynx(29,14),t.YNc(30,O,2,0,"th",11),t.YNc(31,M,2,1,"td",12),t.BQk(),t.ynx(32,15),t.YNc(33,E,2,0,"th",11),t.YNc(34,F,2,1,"td",12),t.BQk(),t.ynx(35,16),t.YNc(36,w,2,0,"th",17),t.YNc(37,B,3,1,"td",12),t.BQk(),t.YNc(38,R,1,0,"tr",18),t.YNc(39,$,1,0,"tr",19),t.qZA()(),t._UZ(40,"br"),t.TgZ(41,"mat-card-footer"),t._UZ(42,"mat-paginator",20),t.qZA()()),2&n){const r=t.MAs(14);t.xp6(9),t.Q6J("matDatepicker",r),t.xp6(3),t.Q6J("for",r),t.xp6(1),t.Q6J("startAt",i.filterDate),t.xp6(9),t.Q6J("dataSource",i.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(3),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(8,z))}},dependencies:[u.rH,c.ez,c.uU,s.UX,m.QW,m.a8,m.dn,m.rt,m.dk,g.ot,g.lW,Z.c,Z.Nt,p.KE,p.hX,p.bx,p.R9,p.lN,d.p0,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,y.TU,y.NW,C.JX,C.YE,C.nU,x.Ps,x.Hw,T.FA,T.Mq,T.hl,T.nW,I.XK],styles:["mat-card[_ngcontent-%COMP%]{margin:2%;text-align:left}.mat-mdc-form-field[_ngcontent-%COMP%]{width:98%;margin:1%}.mat-50[_ngcontent-%COMP%]{width:48%;margin:1%}.mat-column-name[_ngcontent-%COMP%], .mat-column-description[_ngcontent-%COMP%]{width:20%}"]}),e})();var G=a(8525),_=a(4630),W=a(7921),X=a(2048),j=a(9744);const S=function(e){return{"is-invalid":e}};function k(e,o){if(1&e&&(t.TgZ(0,"span"),t._UZ(1,"input",14),t.qZA()),2&e){const n=t.oxw(),i=t.MAs(13);t.xp6(1),t.Q6J("ngClass",t.VKq(2,S,n.submitted&&n.f.product.errors))("matAutocomplete",i)}}function V(e,o){if(1&e&&(t.TgZ(0,"span"),t._UZ(1,"input",15),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.s9C("value",n.prodName)}}function K(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Product is required"),t.qZA())}function tt(e,o){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,K,2,0,"span",3),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.product.errors.required)}}function et(e,o){if(1&e&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n.name," ")}}function nt(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Qty is required"),t.qZA())}function it(e,o){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,nt,2,0,"span",3),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.qty.errors.required)}}function ot(e,o){1&e&&t._UZ(0,"span",17)}function at(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Update"),t.qZA())}function rt(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Save"),t.qZA())}let D=(()=>{class e{constructor(n,i,r,l,f,h){this.formBuilder=n,this.route=i,this.router=r,this.productInService=l,this.productService=f,this.alertService=h,this.loading=!1,this.submitting=!1,this.submitted=!1,this.options={autoClose:!0,keepAfterRouteChange:!0}}ngOnInit(){this.id=this.route.snapshot.params.id,this.form=this.formBuilder.group({product:["",s.kI.required],qty:[0,s.kI.required],description:[""]}),this.title="Add Product In",this.id&&(this.title="Edit Product In",this.loading=!0,this.productInService.getById(this.id).pipe((0,v.P)()).subscribe(n=>{this.form.get("product")?.patchValue(n.product),this.prodName=n.product?.name,this.form.patchValue(n),this.loading=!1})),this.loadProducts(),this.filteredOptions=this.form.get("product").valueChanges.pipe((0,W.O)(""),(0,N.U)(n=>this._listfilter(n||"")))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.submitting=!0,this.saveProduct().pipe((0,v.P)()).subscribe({next:()=>{this.alertService.success("Product In saved",this.options),this.router.navigateByUrl("/product-ins")},error:n=>{this.alertService.error(n,this.options),this.submitting=!1}}))}saveProduct(){return this.id?this.productInService.update(this.id,this.form.value):this.productInService.create(this.form.value)}loadProducts(){this.productService.getAllEnabled().subscribe(n=>{this.products=n})}_listfilter(n){const i=n&&n.name?n?.name?.toLowerCase():"";return this.products?.filter(r=>r.name?.toLowerCase().includes(i))}displayFn(n){return n&&n.name?n.name:""}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(s.qu),t.Y36(u.gz),t.Y36(u.F0),t.Y36(b),t.Y36(X.M5),t.Y36(j.c))},e.\u0275cmp=t.Xpm({type:e,selectors:[["product-in-add-edit-component"]],standalone:!0,features:[t.jDz],decls:34,vars:17,consts:[[3,"formGroup","ngSubmit"],[2,"margin-top","1%","margin-left","1%"],[1,"mat-50"],[4,"ngIf"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","qty","matInput","","min","0","OnlyNumber","true",3,"ngClass"],["input",""],["formControlName","description","matInput","",2,"height","150px"],[2,"margin","2%","text-align","right"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["routerLink","/product-ins",1,"btn","btn-link"],["type","text","placeholder","Select...","aria-label","Product","matInput","","formControlName","product",3,"ngClass","matAutocomplete"],["matInput","","disabled","",3,"value"],[3,"value"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(n,i){1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(1,"mat-card")(2,"mat-card-header")(3,"h2",1),t._uU(4),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Product"),t.qZA(),t.YNc(9,k,2,4,"span",3),t.YNc(10,V,2,1,"span",3),t.YNc(11,tt,2,1,"mat-error",3),t.TgZ(12,"mat-autocomplete",4,5),t.YNc(14,et,2,2,"mat-option",6),t.ALo(15,"async"),t.qZA()(),t.TgZ(16,"mat-form-field",2)(17,"mat-label"),t._uU(18,"Qty"),t.qZA(),t._UZ(19,"input",7,8),t.YNc(21,it,2,1,"mat-error",3),t.qZA(),t.TgZ(22,"mat-form-field",2)(23,"mat-label"),t._uU(24,"Description"),t.qZA(),t._UZ(25,"textarea",9),t.qZA()(),t.TgZ(26,"mat-card-footer")(27,"div",10)(28,"button",11),t.YNc(29,ot,1,0,"span",12),t.YNc(30,at,2,0,"span",3),t.YNc(31,rt,2,0,"span",3),t.qZA(),t.TgZ(32,"a",13),t._uU(33,"Cancel"),t.qZA()()()()()),2&n&&(t.Q6J("formGroup",i.form),t.xp6(4),t.Oqu(i.title),t.xp6(5),t.Q6J("ngIf",!i.id),t.xp6(1),t.Q6J("ngIf",i.id),t.xp6(1),t.Q6J("ngIf",i.submitted&&i.f.product.errors),t.xp6(1),t.Q6J("displayWith",i.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(15,13,i.filteredOptions)),t.xp6(5),t.Q6J("ngClass",t.VKq(15,S,i.submitted&&i.f.qty.errors)),t.xp6(2),t.Q6J("ngIf",i.submitted&&i.f.qty.errors),t.xp6(7),t.Q6J("disabled",i.submitting),t.xp6(1),t.Q6J("ngIf",i.submitting),t.xp6(1),t.Q6J("ngIf",i.id),t.xp6(1),t.Q6J("ngIf",!i.id))},dependencies:[c.O5,s.UX,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.qQ,s.sg,s.u,c.mk,c.ez,c.sg,c.Ov,u.rH,m.QW,m.a8,m.dn,m.rt,m.dk,p.lN,p.KE,p.hX,p.TO,Z.c,Z.Nt,g.ot,g.lW,G.LD,I.ey,_.Bb,_.XC,_.ZL],styles:["mat-card[_ngcontent-%COMP%]{margin:2%;text-align:left}.mat-mdc-form-field[_ngcontent-%COMP%]{width:98%;margin:1%}.mat-50[_ngcontent-%COMP%]{width:48%;margin:1%}.mat-column-name[_ngcontent-%COMP%], .mat-column-description[_ngcontent-%COMP%]{width:20%}"]}),e})();const st=[{path:"",component:H},{path:"add",component:D},{path:"edit/:id",component:D}]}}]);