"use strict";(self.webpackChunkaabbq_ui=self.webpackChunkaabbq_ui||[]).push([[396],{5396:(Tt,U,r)=>{r.r(U),r.d(U,{PRODUCT_INVENTORIES_ROUTES:()=>Ct});var c=r(6814),s=r(6223),l=r(2787),v=r(1374),d=r(5195),h=r(2296),_=r(2032),u=r(9157),m=r(5313),y=r(3365),Z=r(3566),N=r(617),C=r(8034),D=r(3307),x=r(3680),t=r(5879),I=r(7398),T=r(1594),L=r(9862);let q=(()=>{class e{constructor(n,o){this.router=n,this.http=o}getAll(n){return this.http.get(`${T.N.apiUrl}/product-inventory/${n}`)}create(n){return this.http.post(`${T.N.apiUrl}/product-inventory`,n)}getById(n){return this.http.get(`${T.N.apiUrl}/product-inventory/edit/${n}`)}update(n,o){return this.http.put(`${T.N.apiUrl}/product-inventory/${n}`,o).pipe((0,I.U)(a=>a))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(l.F0),t.LFG(L.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Q(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1," ID "),t.qZA())}function P(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.id," ")}}function S(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1," Transaction Date "),t.qZA())}function E(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n.transaction_date,"MM/dd/yyyy")," ")}}function J(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1," Product "),t.qZA())}function O(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.product.name," ")}}function M(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1," Beginning Balance "),t.qZA())}function B(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.balance_begin," ")}}function F(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1," Product In "),t.qZA())}function w(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.product_in," ")}}function $(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1," Total "),t.qZA())}function k(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.total," ")}}function R(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1," Product Out "),t.qZA())}function j(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.product_out," ")}}function z(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1," Balance End "),t.qZA())}function H(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.balance_end," ")}}function V(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1," Action "),t.qZA())}function G(e,i){if(1&e&&(t.TgZ(0,"td",26)(1,"a",28),t._uU(2,"Edit"),t.qZA()()),2&e){const n=i.$implicit;t.xp6(1),t.MGl("routerLink","edit/",n.id,"")}}function W(e,i){1&e&&t._UZ(0,"tr",29)}function X(e,i){1&e&&t._UZ(0,"tr",30)}const K=function(){return[10,20,50]};let tt=(()=>{class e{constructor(n,o){this.productInventoryService=n,this.datePipe=o,this.displayedColumns=["id","transaction_date","product","balance_begin","product_in","total","product_out","balance_end","action"],this.filterDate=new s.NI(new Date)}ngOnInit(){this.getAll(new Date)}getAll(n){this.productInventoryService.getAll(n).pipe((0,v.P)()).subscribe(o=>{this.productInventories=o,this.dataSource=new m.by(this.productInventories),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.filterPredicate=(a,p)=>{const f=new Date(a.transaction_date),g=new Date(p);return a.product?.name?.toLocaleLowerCase().includes(p)||f.getFullYear()===g.getFullYear()&&f.getMonth()===g.getMonth()&&f.getDate()===g.getDate()}})}filterChange(n){this.dataSource.filter=n.target.value}exportTable(){D.E.exportTableToExcel("product-inventories","Product Inventories")}onDateChange(n){const o=n.value;console.log(this.datePipe.transform(o,"MM/dd/yyyy")),this.getAll(new Date(o)),this.dataSource.filter=this.datePipe.transform(o,"yyyy-MM-dd HH:mm:ss")}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(q),t.Y36(c.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["product-inventory-list-component"]],viewQuery:function(n,o){if(1&n&&(t.Gf(y.NW,5),t.Gf(Z.YE,5)),2&n){let a;t.iGM(a=t.CRH())&&(o.paginator=a.first),t.iGM(a=t.CRH())&&(o.sort=a.first)}},standalone:!0,features:[t._Bn([c.uU]),t.jDz],decls:55,vars:9,consts:[[2,"margin","1%"],[2,"margin-top","1%","margin-left","1%"],["matInput","","placeholder","Search here...",3,"keyup"],["matInput","",3,"matDatepicker","dateChange"],["matIconSuffix","",3,"for"],["startView","month",3,"startAt"],["picker",""],["routerLink","add","mat-raised-button","","color","primary",2,"margin-left","44%"],["mat-raised-button","","color","warn",2,"margin-left","1%",3,"click"],["id","product-inventories","mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-sort-header","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","transaction_date"],["matColumnDef","product"],["matColumnDef","balance_begin"],["matColumnDef","product_in"],["matColumnDef","total"],["matColumnDef","product_out"],["matColumnDef","balance_end"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["mat-sort-header","","mat-header-cell",""],["mat-cell",""],["mat-header-cell",""],[1,"btn","btn-sm","btn-primary","me-1",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(n,o){if(1&n&&(t.TgZ(0,"mat-card",0)(1,"h2",1),t._uU(2,"Product Inventories"),t.qZA(),t.TgZ(3,"mat-card-header")(4,"mat-form-field")(5,"input",2),t.NdJ("keyup",function(p){return o.filterChange(p)}),t.qZA()(),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8,"Filter transaction date"),t.qZA(),t.TgZ(9,"input",3),t.NdJ("dateChange",function(p){return o.onDateChange(p)}),t.qZA(),t.TgZ(10,"mat-hint"),t._uU(11,"MM/DD/YYYY"),t.qZA(),t._UZ(12,"mat-datepicker-toggle",4)(13,"mat-datepicker",5,6),t.qZA(),t.TgZ(15,"button",7),t._uU(16,"Create"),t.qZA(),t.TgZ(17,"button",8),t.NdJ("click",function(){return o.exportTable()}),t.TgZ(18,"mat-icon"),t._uU(19,"grid_on"),t.qZA(),t._uU(20,"Export"),t.qZA()(),t.TgZ(21,"mat-card-content")(22,"table",9),t.ynx(23,10),t.YNc(24,Q,2,0,"th",11),t.YNc(25,P,2,1,"td",12),t.BQk(),t.ynx(26,13),t.YNc(27,S,2,0,"th",11),t.YNc(28,E,3,4,"td",12),t.BQk(),t.ynx(29,14),t.YNc(30,J,2,0,"th",11),t.YNc(31,O,2,1,"td",12),t.BQk(),t.ynx(32,15),t.YNc(33,M,2,0,"th",11),t.YNc(34,B,2,1,"td",12),t.BQk(),t.ynx(35,16),t.YNc(36,F,2,0,"th",11),t.YNc(37,w,2,1,"td",12),t.BQk(),t.ynx(38,17),t.YNc(39,$,2,0,"th",11),t.YNc(40,k,2,1,"td",12),t.BQk(),t.ynx(41,18),t.YNc(42,R,2,0,"th",11),t.YNc(43,j,2,1,"td",12),t.BQk(),t.ynx(44,19),t.YNc(45,z,2,0,"th",11),t.YNc(46,H,2,1,"td",12),t.BQk(),t.ynx(47,20),t.YNc(48,V,2,0,"th",21),t.YNc(49,G,3,1,"td",12),t.BQk(),t.YNc(50,W,1,0,"tr",22),t.YNc(51,X,1,0,"tr",23),t.qZA()(),t._UZ(52,"br"),t.TgZ(53,"mat-card-footer"),t._UZ(54,"mat-paginator",24),t.qZA()()),2&n){const a=t.MAs(14);t.xp6(9),t.Q6J("matDatepicker",a),t.xp6(3),t.Q6J("for",a),t.xp6(1),t.Q6J("startAt",o.filterDate),t.xp6(9),t.Q6J("dataSource",o.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(3),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(8,K))}},dependencies:[l.rH,c.ez,c.uU,s.UX,d.QW,d.a8,d.dn,d.rt,d.dk,h.ot,h.lW,_.c,_.Nt,u.KE,u.hX,u.bx,u.R9,u.lN,m.p0,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,y.TU,y.NW,Z.JX,Z.YE,Z.nU,N.Ps,N.Hw,C.FA,C.Mq,C.hl,C.nW,x.XK],styles:["mat-card[_ngcontent-%COMP%]{margin:2%;text-align:left}.mat-mdc-form-field[_ngcontent-%COMP%]{width:98%;margin:1%}.mat-50[_ngcontent-%COMP%]{width:48%;margin:1%}.mat-column-name[_ngcontent-%COMP%], .mat-column-description[_ngcontent-%COMP%]{width:20%}"]}),e})();var et=r(8525),b=r(4630),nt=r(7921),ot=r(2048),it=r(9744);function rt(e,i){if(1&e&&(t.TgZ(0,"span"),t._UZ(1,"input",17),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.s9C("value",n.prodName)}}const A=function(e){return{"is-invalid":e}};function at(e,i){if(1&e&&(t.TgZ(0,"span"),t._UZ(1,"input",18),t.qZA()),2&e){const n=t.oxw(),o=t.MAs(12);t.xp6(1),t.Q6J("ngClass",t.VKq(2,A,n.submitted&&n.f.product.errors))("matAutocomplete",o)}}function st(e,i){if(1&e&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n.name," ")}}function mt(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Product is required"),t.qZA())}function dt(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,mt,2,0,"span",3),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.product.errors.required)}}function ct(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Beginning Balance is required"),t.qZA())}function ut(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,ct,2,0,"span",3),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.balance_begin.errors.required)}}function pt(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Product In is required"),t.qZA())}function lt(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,pt,2,0,"span",3),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.product_in.errors.required)}}function ft(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Product Out is required"),t.qZA())}function gt(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,ft,2,0,"span",3),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.product_out.errors.required)}}function ht(e,i){1&e&&t._UZ(0,"span",20)}function _t(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Update"),t.qZA())}function Zt(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Save"),t.qZA())}let Y=(()=>{class e{constructor(n,o,a,p,f,g){this.formBuilder=n,this.route=o,this.router=a,this.productInventoryService=p,this.productService=f,this.alertService=g,this.loading=!1,this.submitting=!1,this.submitted=!1,this.options={autoClose:!0,keepAfterRouteChange:!0}}ngOnInit(){this.id=this.route.snapshot.params.id,this.form=this.formBuilder.group({product:["",s.kI.required],balance_begin:[0,s.kI.required],product_in:[0,s.kI.required],total:[0],product_out:[0,s.kI.required],balance_end:[0]}),this.title="Add Product Inventory",this.id&&(this.title="Edit Product Inventory",this.loading=!0,this.productInventoryService.getById(this.id).pipe((0,v.P)()).subscribe(n=>{this.form.get("product")?.patchValue(n.product),this.prodName=n.product?.name,this.form.patchValue(n),this.loading=!1})),this.loadProducts(),this.filteredOptions=this.form.get("product").valueChanges.pipe((0,nt.O)(""),(0,I.U)(n=>{const o="string"==typeof n?n:n?.name;return o?this._listfilter(o):this.products?.slice()}))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.submitting=!0,this.saveProduct().pipe((0,v.P)()).subscribe({next:()=>{this.alertService.success("Product Inventory saved",this.options),this.router.navigateByUrl("/product-inventories")},error:n=>{this.alertService.error(n,this.options),this.submitting=!1}}))}saveProduct(){return this.id?this.productInventoryService.update(this.id,this.form.value):this.productInventoryService.create(this.form.value)}loadProducts(){this.productService.getAllEnabled().subscribe(n=>{this.products=n})}_listfilter(n){const o=n.toLowerCase();return this.products.filter(a=>a.name?.toLowerCase().includes(o))}displayFn(n){return n&&n.name?n.name:""}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(s.qu),t.Y36(l.gz),t.Y36(l.F0),t.Y36(q),t.Y36(ot.M5),t.Y36(it.c))},e.\u0275cmp=t.Xpm({type:e,selectors:[["product-inventory-add-edit-component"]],standalone:!0,features:[t.jDz],decls:50,vars:25,consts:[[3,"formGroup","ngSubmit"],[2,"margin-top","1%","margin-left","1%"],[1,"mat-50"],[4,"ngIf"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","balance_begin","matInput","","min","0","OnlyNumber","true",3,"ngClass"],["input",""],["type","number","formControlName","product_in","matInput","","min","0","OnlyNumber","true",3,"ngClass"],["formControlName","total","matInput","","readonly",""],["type","number","formControlName","product_out","matInput","","min","0","OnlyNumber","true",3,"ngClass"],["formControlName","balance_end","matInput","","readonly",""],[2,"margin","2%","text-align","right"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["routerLink","/product-inventories",1,"btn","btn-link"],["matInput","","disabled","",3,"value"],["type","text","placeholder","Select...","aria-label","Product","matInput","","formControlName","product",3,"ngClass","matAutocomplete"],[3,"value"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(n,o){1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(1,"mat-card")(2,"mat-card-header")(3,"h2",1),t._uU(4),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"Product"),t.qZA(),t.YNc(9,rt,2,1,"span",3),t.YNc(10,at,2,4,"span",3),t.TgZ(11,"mat-autocomplete",4,5),t.YNc(13,st,2,2,"mat-option",6),t.ALo(14,"async"),t.qZA(),t.YNc(15,dt,2,1,"mat-error",3),t.qZA(),t.TgZ(16,"mat-form-field",2)(17,"mat-label"),t._uU(18,"Beginning Balance"),t.qZA(),t._UZ(19,"input",7,8),t.YNc(21,ut,2,1,"mat-error",3),t.qZA(),t.TgZ(22,"mat-form-field",2)(23,"mat-label"),t._uU(24,"Product In"),t.qZA(),t._UZ(25,"input",9,8),t.YNc(27,lt,2,1,"mat-error",3),t.qZA(),t.TgZ(28,"mat-form-field",2)(29,"mat-label"),t._uU(30,"Total"),t.qZA(),t._UZ(31,"input",10),t.qZA(),t.TgZ(32,"mat-form-field",2)(33,"mat-label"),t._uU(34,"Product Out"),t.qZA(),t._UZ(35,"input",11,8),t.YNc(37,gt,2,1,"mat-error",3),t.qZA(),t.TgZ(38,"mat-form-field",2)(39,"mat-label"),t._uU(40,"Balance End"),t.qZA(),t._UZ(41,"input",12),t.qZA()(),t.TgZ(42,"mat-card-footer")(43,"div",13)(44,"button",14),t.YNc(45,ht,1,0,"span",15),t.YNc(46,_t,2,0,"span",3),t.YNc(47,Zt,2,0,"span",3),t.qZA(),t.TgZ(48,"a",16),t._uU(49,"Cancel"),t.qZA()()()()()),2&n&&(t.Q6J("formGroup",o.form),t.xp6(4),t.Oqu(o.title),t.xp6(5),t.Q6J("ngIf",o.id),t.xp6(1),t.Q6J("ngIf",!o.id),t.xp6(1),t.Q6J("displayWith",o.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(14,17,o.filteredOptions)),t.xp6(2),t.Q6J("ngIf",o.submitted&&o.f.product.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(19,A,o.submitted&&o.f.balance_begin.errors)),t.xp6(2),t.Q6J("ngIf",o.submitted&&o.f.balance_begin.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(21,A,o.submitted&&o.f.product_in.errors)),t.xp6(2),t.Q6J("ngIf",o.submitted&&o.f.product_in.errors),t.xp6(8),t.Q6J("ngClass",t.VKq(23,A,o.submitted&&o.f.product_out.errors)),t.xp6(2),t.Q6J("ngIf",o.submitted&&o.f.product_out.errors),t.xp6(7),t.Q6J("disabled",o.submitting),t.xp6(1),t.Q6J("ngIf",o.submitting),t.xp6(1),t.Q6J("ngIf",o.id),t.xp6(1),t.Q6J("ngIf",!o.id))},dependencies:[c.O5,s.UX,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.qQ,s.sg,s.u,c.mk,c.ez,c.sg,c.Ov,l.rH,d.QW,d.a8,d.dn,d.rt,d.dk,u.lN,u.KE,u.hX,u.TO,_.c,_.Nt,h.ot,h.lW,et.LD,x.ey,b.Bb,b.XC,b.ZL],styles:["mat-card[_ngcontent-%COMP%]{margin:2%;text-align:left}.mat-mdc-form-field[_ngcontent-%COMP%]{width:98%;margin:1%}.mat-50[_ngcontent-%COMP%]{width:48%;margin:1%}.mat-column-name[_ngcontent-%COMP%], .mat-column-description[_ngcontent-%COMP%]{width:20%}"]}),e})();const Ct=[{path:"",component:tt},{path:"add",component:Y},{path:"edit/:id",component:Y}]}}]);