"use strict";(self.webpackChunkaabbq_ui=self.webpackChunkaabbq_ui||[]).push([[387],{7387:(ut,A,o)=>{o.r(A),o.d(A,{USERS_ROUTES:()=>mt});var f=o(2787),Z=o(1374),m=o(5195),c=o(2296),_=o(2032),u=o(9157),s=o(5313),h=o(3365),g=o(3566),t=o(5879),T=o(404);function x(e,r){1&e&&(t.TgZ(0,"th",18),t._uU(1," ID "),t.qZA())}function b(e,r){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.hij(" ",n.id," ")}}function N(e,r){1&e&&(t.TgZ(0,"th",18),t._uU(1," First "),t.qZA())}function v(e,r){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.hij(" ",n.first_name," ")}}function I(e,r){1&e&&(t.TgZ(0,"th",18),t._uU(1," Last "),t.qZA())}function Y(e,r){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.hij(" ",n.last_name," ")}}function Q(e,r){1&e&&(t.TgZ(0,"th",18),t._uU(1," Username "),t.qZA())}function E(e,r){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.hij(" ",n.username," ")}}function S(e,r){1&e&&(t.TgZ(0,"th",18),t._uU(1," Role "),t.qZA())}function J(e,r){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.hij(" ",n.role," ")}}function L(e,r){1&e&&(t.TgZ(0,"th",18),t._uU(1," Status "),t.qZA())}function y(e,r){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.hij(" ",n.status," ")}}function D(e,r){1&e&&(t.TgZ(0,"th",20),t._uU(1," Action "),t.qZA())}function w(e,r){if(1&e&&(t.TgZ(0,"td",19)(1,"a",21),t._uU(2,"Edit"),t.qZA()()),2&e){const n=r.$implicit;t.xp6(1),t.MGl("routerLink","edit/",n.id,"")}}function k(e,r){1&e&&t._UZ(0,"tr",22)}function R(e,r){1&e&&t._UZ(0,"tr",23)}const B=function(){return[10,20,50]};let O=(()=>{class e{constructor(n){this.accountService=n,this.displayedColumns=["id","first_name","last_name","username","role","status","action"]}ngOnInit(){this.getUsers()}getUsers(){this.accountService.getAll().pipe((0,Z.P)()).subscribe(n=>{this.users=n,this.dataSource=new s.by(this.users),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}filterChange(n){this.dataSource.filter=n.target.value}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(T.BR))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,a){if(1&n&&(t.Gf(h.NW,5),t.Gf(g.YE,5)),2&n){let d;t.iGM(d=t.CRH())&&(a.paginator=d.first),t.iGM(d=t.CRH())&&(a.sort=d.first)}},standalone:!0,features:[t.jDz],decls:36,vars:6,consts:[[2,"margin","1%"],[2,"margin-top","1%","margin-left","1%"],["matInput","","placeholder","Search here...",3,"keyup"],["routerLink","add","mat-raised-button","","color","primary",2,"margin-left","80%"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-sort-header","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","first_name"],["matColumnDef","last_name"],["matColumnDef","username"],["matColumnDef","role"],["matColumnDef","status"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["mat-sort-header","","mat-header-cell",""],["mat-cell",""],["mat-header-cell",""],[1,"btn","btn-sm","btn-primary","me-1",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(n,a){1&n&&(t.TgZ(0,"mat-card",0)(1,"h2",1),t._uU(2,"Users"),t.qZA(),t.TgZ(3,"mat-card-header")(4,"mat-form-field")(5,"input",2),t.NdJ("keyup",function(C){return a.filterChange(C)}),t.qZA()(),t.TgZ(6,"button",3),t._uU(7,"Add User"),t.qZA()(),t.TgZ(8,"mat-card-content")(9,"table",4),t.ynx(10,5),t.YNc(11,x,2,0,"th",6),t.YNc(12,b,2,1,"td",7),t.BQk(),t.ynx(13,8),t.YNc(14,N,2,0,"th",6),t.YNc(15,v,2,1,"td",7),t.BQk(),t.ynx(16,9),t.YNc(17,I,2,0,"th",6),t.YNc(18,Y,2,1,"td",7),t.BQk(),t.ynx(19,10),t.YNc(20,Q,2,0,"th",6),t.YNc(21,E,2,1,"td",7),t.BQk(),t.ynx(22,11),t.YNc(23,S,2,0,"th",6),t.YNc(24,J,2,1,"td",7),t.BQk(),t.ynx(25,12),t.YNc(26,L,2,0,"th",6),t.YNc(27,y,2,1,"td",7),t.BQk(),t.ynx(28,13),t.YNc(29,D,2,0,"th",14),t.YNc(30,w,3,1,"td",7),t.BQk(),t.YNc(31,k,1,0,"tr",15),t.YNc(32,R,1,0,"tr",16),t.qZA()(),t._UZ(33,"br"),t.TgZ(34,"mat-card-footer"),t._UZ(35,"mat-paginator",17),t.qZA()()),2&n&&(t.xp6(9),t.Q6J("dataSource",a.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(3),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(5,B)))},dependencies:[f.rH,m.QW,m.a8,m.dn,m.rt,m.dk,c.ot,c.lW,_.c,_.Nt,u.KE,u.lN,s.p0,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,h.TU,h.NW,g.JX,g.YE,g.nU],encapsulation:2}),e})();var U=o(6814),i=o(6223),j=o(8525),l=(()=>((l=l||{}).User="User",l.Admin="Admin",l))(),z=o(6517);function P(e,r){1&e&&(t.TgZ(0,"span"),t._uU(1,"First Name is required"),t.qZA())}function F(e,r){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,P,2,0,"span",3),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.first_name.errors.required)}}function G(e,r){1&e&&(t.TgZ(0,"span"),t._uU(1,"Last Name is required"),t.qZA())}function H(e,r){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,G,2,0,"span",3),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.last_name.errors.required)}}function K(e,r){if(1&e&&t._UZ(0,"input",19),2&e){const n=t.oxw();t.s9C("value",n.username)}}function M(e,r){1&e&&(t.TgZ(0,"span"),t._uU(1,"Username is required"),t.qZA())}function $(e,r){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,M,2,0,"span",3),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.username.errors.required)}}function V(e,r){1&e&&(t.TgZ(0,"em"),t._uU(1,"(Leave blank to keep the same password)"),t.qZA())}function W(e,r){1&e&&(t.TgZ(0,"span"),t._uU(1,"Password is required"),t.qZA())}function X(e,r){1&e&&(t.TgZ(0,"span"),t._uU(1,"Password must be at least 6 characters"),t.qZA())}function tt(e,r){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,W,2,0,"span",3),t.YNc(2,X,2,0,"span",3),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.password.errors.required),t.xp6(1),t.Q6J("ngIf",n.f.password.errors.minlength)}}function et(e,r){1&e&&(t.TgZ(0,"span"),t._uU(1,"Email is required"),t.qZA())}function nt(e,r){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,et,2,0,"span",3),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.email.errors.required)}}function rt(e,r){1&e&&(t.TgZ(0,"span"),t._uU(1,"Role is required"),t.qZA())}function at(e,r){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,rt,2,0,"span",3),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.role.errors.required)}}function it(e,r){1&e&&(t.TgZ(0,"span"),t._uU(1,"Status is required"),t.qZA())}function ot(e,r){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,it,2,0,"span",3),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.status.errors.required)}}function st(e,r){1&e&&t._UZ(0,"span",20)}const p=function(e){return{"is-invalid":e}};let q=(()=>{class e{constructor(n,a,d,C,dt){this.formBuilder=n,this.route=a,this.router=d,this.accountService=C,this.alertService=dt,this.loading=!1,this.submitting=!1,this.submitted=!1,this.username=""}ngOnInit(){this.id=this.route.snapshot.params.id,this.form=this.formBuilder.group({first_name:["",i.kI.required],last_name:["",i.kI.required],username:["",i.kI.required],email:["",[i.kI.required,i.kI.email]],role:[l.User,i.kI.required],status:[z.q.ENABLED,i.kI.required],password:["",[i.kI.minLength(6),...this.id?[]:[i.kI.required]]]}),this.title="Add User",this.id&&(this.title="Edit User",this.loading=!0,this.username=this.form.get("username")?.value,this.accountService.getById(this.id).pipe((0,Z.P)()).subscribe(n=>{this.form.patchValue(n),this.loading=!1}))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.submitting=!0,this.saveUser().pipe((0,Z.P)()).subscribe({next:()=>{this.alertService.success("User saved",!0),this.router.navigateByUrl("/users")},error:n=>{this.alertService.error(n),this.submitting=!1}}))}saveUser(){return this.id?this.accountService.update(this.id,this.form.value):this.accountService.register(this.form.value)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(i.qu),t.Y36(f.gz),t.Y36(f.F0),t.Y36(T.BR),t.Y36(T.c9))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],standalone:!0,features:[t.jDz],decls:59,vars:29,consts:[[3,"formGroup","ngSubmit"],[1,"mat-50"],["type","text","formControlName","first_name","matInput","",3,"ngClass"],[4,"ngIf"],["type","text","formControlName","last_name","matInput","",3,"ngClass"],["matInput","","disabled","",3,"value",4,"ngIf"],["type","text","formControlName","username","matInput","",3,"ngClass"],["type","text","formControlName","password","matInput","",3,"ngClass"],["type","text","formControlName","email","matInput","",3,"ngClass"],["matNativeControl","","required","","formControlName","role","matInput",""],["value","User"],["value","Admin"],["matNativeControl","","required","","formControlName","status","matInput",""],["value","Enabled"],["value","Disabled"],[2,"margin","2%","text-align","right"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["routerLink","/users",1,"btn","btn-link"],["matInput","","disabled","",3,"value"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(n,a){1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return a.onSubmit()}),t.TgZ(1,"mat-card")(2,"mat-card-header")(3,"h1"),t._uU(4),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"mat-form-field",1)(7,"mat-label"),t._uU(8,"First Name"),t.qZA(),t._UZ(9,"input",2),t.YNc(10,F,2,1,"mat-error",3),t.qZA(),t.TgZ(11,"mat-form-field",1)(12,"mat-label"),t._uU(13,"Last Name"),t.qZA(),t._UZ(14,"input",4),t.YNc(15,H,2,1,"mat-error",3),t.qZA(),t.TgZ(16,"mat-form-field",1)(17,"mat-label"),t._uU(18,"Username"),t.qZA(),t._uU(19),t.YNc(20,K,1,1,"input",5),t._UZ(21,"input",6),t.YNc(22,$,2,1,"mat-error",3),t.qZA(),t.TgZ(23,"mat-form-field",1)(24,"mat-label"),t._uU(25,"Password "),t.YNc(26,V,2,0,"em",3),t.qZA(),t._UZ(27,"input",7),t.YNc(28,tt,3,2,"mat-error",3),t.qZA(),t.TgZ(29,"mat-form-field",1)(30,"mat-label"),t._uU(31,"Email"),t.qZA(),t._UZ(32,"input",8),t.YNc(33,nt,2,1,"mat-error",3),t.qZA(),t.TgZ(34,"mat-form-field",1)(35,"mat-label"),t._uU(36,"Role"),t.qZA(),t.TgZ(37,"select",9)(38,"option",10),t._uU(39,"User"),t.qZA(),t.TgZ(40,"option",11),t._uU(41,"Admin"),t.qZA()(),t.YNc(42,at,2,1,"mat-error",3),t.qZA(),t.TgZ(43,"mat-form-field",1)(44,"mat-label"),t._uU(45,"Status"),t.qZA(),t.TgZ(46,"select",12)(47,"option",13),t._uU(48,"Enabled"),t.qZA(),t.TgZ(49,"option",14),t._uU(50,"Disabled"),t.qZA()(),t.YNc(51,ot,2,1,"mat-error",3),t.qZA()(),t.TgZ(52,"mat-card-footer")(53,"div",15)(54,"button",16),t.YNc(55,st,1,0,"span",17),t._uU(56," Save "),t.qZA(),t.TgZ(57,"a",18),t._uU(58,"Cancel"),t.qZA()()()()()),2&n&&(t.Q6J("formGroup",a.form),t.xp6(4),t.Oqu(a.title),t.xp6(5),t.Q6J("ngClass",t.VKq(19,p,a.submitted&&a.f.first_name.errors)),t.xp6(1),t.Q6J("ngIf",a.submitted&&a.f.first_name.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(21,p,a.submitted&&a.f.last_name.errors)),t.xp6(1),t.Q6J("ngIf",a.submitted&&a.f.last_name.errors),t.xp6(4),t.hij(" ",a.username," "),t.xp6(1),t.Q6J("ngIf",a.id),t.xp6(1),t.Q6J("ngClass",t.VKq(23,p,a.submitted&&a.f.username.errors)),t.xp6(1),t.Q6J("ngIf",a.submitted&&a.f.username.errors),t.xp6(4),t.Q6J("ngIf",a.id),t.xp6(1),t.Q6J("ngClass",t.VKq(25,p,a.submitted&&a.f.password.errors)),t.xp6(1),t.Q6J("ngIf",a.submitted&&a.f.password.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(27,p,a.submitted&&a.f.email.errors)),t.xp6(1),t.Q6J("ngIf",a.submitted&&a.f.email.errors),t.xp6(9),t.Q6J("ngIf",a.submitted&&a.f.role.errors),t.xp6(9),t.Q6J("ngIf",a.submitted&&a.f.status.errors),t.xp6(3),t.Q6J("disabled",a.submitting),t.xp6(1),t.Q6J("ngIf",a.submitting))},dependencies:[U.O5,i.UX,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.Q7,i.sg,i.u,U.mk,f.rH,m.QW,m.a8,m.dn,m.rt,m.dk,u.lN,u.KE,u.hX,u.TO,_.c,_.Nt,c.ot,c.lW,j.LD],styles:["mat-card[_ngcontent-%COMP%]{margin:2%;text-align:left}.mat-mdc-form-field[_ngcontent-%COMP%]{width:98%;margin:1%}.mat-50[_ngcontent-%COMP%]{width:48%;margin:1%}"]}),e})();const mt=[{path:"",component:O},{path:"add",component:q},{path:"edit/:id",component:q}]}}]);